(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){e.exports=a(420)},229:function(e,t,a){},420:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"updateUser",function(){return L});var r={};a.r(r),a.d(r,"login",function(){return q}),a.d(r,"signUp",function(){return Y}),a.d(r,"logOut",function(){return Q});var c={};a.r(c),a.d(c,"addDevice",function(){return W}),a.d(c,"updateDevice",function(){return X}),a.d(c,"updateDevices",function(){return J}),a.d(c,"deleteDevice",function(){return K}),a.d(c,"setSelectedDevice",function(){return z});var l={};a.r(l),a.d(l,"updateRecord",function(){return V}),a.d(l,"setDeviceRecords",function(){return Z}),a.d(l,"setSelectedRecord",function(){return ee});var i=a(1),s=a.n(i),o=a(78),u=a.n(o),d=a(19),m=a(163),p=a(429),v=a(20),f=a(183),h=a(165),b=a(232),g=a(42),y=a(167),E=a(11),_=a(26),O={id:null,email:null},j={selectedDevice:{},devices:{}},N=a(81),k=a.n(N),w={selected:{},all:{},today:[]},D=Object(g.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"signUp":var a=t.payload;return Object(_.a)({},e,a);case"login":var n=t.payload;return Object(_.a)({},e,n);case"update_user":var r=t.payload;return Object(_.a)({},e,r);case"logOut":return O;default:return e}},device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_device":var a=t.payload,n=a.dev_name,r=Object(_.a)({},e.devices);return r[n]=a,Object(_.a)({},e,{devices:r});case"update_device":var c=e.devices,l=t.payload,i=Object.keys(c).map(function(e){return c[e]===l.dev_name?l:c[e]});return Object(_.a)({},e,{devices:i});case"update_devices":var s=t.payload,o=e.devices;s.forEach(function(e){o[e.dev_name]=e});var u=e.selectedDevice;return 0===Object.keys(u).length&&(u=s[0]),{selectedDevice:u,devices:o};case"delete_device":var d=t.payload,m=e.devices;return delete m[d],Object(_.a)({},e,{devices:m});case"set_selected_device":var p=t.payload,v=e.devices[p];return{selectedDevice:{id:v.id,settings:v.settings,dev_name:v.dev_name},devices:Object(_.a)({},e.devices)};case"logOut":return j;default:return e}},records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"update_records":var a=t.payload,n=e.today;return n.push(a),Object(_.a)({},e,{today:n});case"getDeviceRecords":var r=t.payload;if(r.length>0){var c=r[r.length-1],l=c,i=k()().format("MM/DD/YYYY"),s=[];c.date===i&&(s=c.data);var o={};return r.forEach(function(e){o[e.date]=e}),{selected:l,all:o,today:s}}return w;case"setSelectedRecord":var u=t.payload;return Object(_.a)({},e,{selected:u});case"logOut":return w;default:return e}}}),C=(a(229),a(13)),M=a(14),S=a(16),U=a(15),x=a(17),A=a(428),I=a(427),T=a(431),$=a(12),H=a.n($),G=function(e){var t=function(t){function a(){return Object(C.a)(this,a),Object(S.a)(this,Object(U.a)(a).apply(this,arguments))}return Object(x.a)(a,t),Object(M.a)(a,[{key:"componentDidMount",value:function(){H.a.get("xAuthG")||this.props.history.push("/")}},{key:"componentWillUpdate",value:function(e){H.a.get("xAuthG")||(console.log(e),this.props.history.push("/"))}},{key:"render",value:function(){return s.a.createElement(e,this.props)}}]),a}(i.Component);return Object(T.a)(t)},F=a(21),R=a(22),P=a.n(R),B=function(){return s.a.createElement("div",{className:"spinner"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null))},L=function(e){return{type:"update_user",payload:e}},q=function(e){return{type:"login",payload:e}},Y=function(e){return{type:"signUp",payload:e}},Q=function(){return{type:"logOut"}},W=function(e){return{type:"add_device",payload:e}},X=function(e){return{type:"update_device",payload:e}},J=function(e){return{type:"update_devices",payload:e}},K=function(e){return{type:"delete_device",payload:e}},z=function(e){return{type:"set_selected_device",payload:e}},V=function(e){return{type:"update_records",payload:e}},Z=function(e){return{type:"getDeviceRecords",payload:e}},ee=function(e){return{type:"setSelectedRecord",payload:e}},te=Object(_.a)({},n,r,c,l);function ae(){var e=Object(F.a)(["\n  mutation createUser($data: CreateUserInput!) {\n    createUser(data: $data) {\n      id\n      email\n      token\n    }\n  }\n"]);return ae=function(){return e},e}var ne=P()(ae()),re=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",loading:!1,errorMsg:null},a.handleClick=function(e){var t=a.state,n=t.email,r=t.password,c=t.loading;""===n||""===r||c?a.setState({errorMsg:"please check inputs"}):(a.setState({loading:!0}),e({variables:{data:{email:a.state.email,password:a.state.password}}}))},a.loadingBtn=function(e){var t=e.createUser;return a.state.loading?s.a.createElement(B,null):s.a.createElement("div",null,s.a.createElement("button",{className:"btn_primary",onClick:function(){a.handleClick(t)}},s.a.createElement("span",{className:"btn_primary-center"},"Submit")),s.a.createElement("p",{className:"error"},a.state.errorMsg))},a.setError=function(e){var t=e.message.slice(e.message.indexOf(":")+2);H.a.remove("xAuthG"),a.setState({errorMsg:t,loading:!1,email:"",password:""})},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"landing_center"},s.a.createElement("h1",{className:"center_header H_primary"},"Grow Control"),s.a.createElement("div",{id:"login",className:"authForm card"},s.a.createElement("span",{className:"authForm_close form_close",onClick:function(){e.props.setDisplay()}},"X"),s.a.createElement("h2",{className:"authForm_header H_secondary"},"Sign Up"),s.a.createElement("input",{type:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})}}),s.a.createElement("label",null,"Email"),s.a.createElement("input",{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),s.a.createElement("label",null,"Password"),s.a.createElement(d.Mutation,{mutation:ne,onError:function(t){e.setError(t)},onCompleted:function(t){if(t.createUser.token){var a=t.createUser.token;H.a.set("xAuthG",a),e.props.signUp(t.createUser),e.props.history.push("/dashboard")}else e.setState({loading:!1})}},function(t,a){a.data;return s.a.createElement("div",null,e.loadingBtn({createUser:t}))})))}}]),t}(i.Component),ce=Object(E.b)(null,te)(Object(T.a)(re));function le(){var e=Object(F.a)(["\n  mutation loginUser($data: LoginUserInput!) {\n    loginUser(data: $data) {\n      id\n      email\n      token\n    }\n  }\n"]);return le=function(){return e},e}var ie=P()(le()),se=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",loading:!1,errorMsg:null},a.handleClick=function(e){var t=a.state,n=t.email,r=t.password,c=t.loading;""===n||""===r||c?a.setState({errorMsg:"please check inputs"}):(a.setState({loading:!0}),e({variables:{data:{email:a.state.email,password:a.state.password}}}))},a.loadingBtn=function(e){var t=e.loginUser;return a.state.loading?s.a.createElement(B,null):s.a.createElement("div",null,s.a.createElement("button",{className:"btn_primary",onClick:function(){a.handleClick(t)}},s.a.createElement("span",{className:"btn_primary-center"},"Submit")),s.a.createElement("p",{className:"error"},a.state.errorMsg))},a.setError=function(e){var t=e.message.slice(e.message.indexOf(":")+2);H.a.remove("xAuthG"),a.setState({errorMsg:t,loading:!1,email:"",password:""})},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"landing_center"},s.a.createElement("h1",{className:"center_header H_primary"},"Grow Control"),s.a.createElement("div",{id:"login",className:"authForm card"},s.a.createElement("span",{className:"authForm_close form_close",onClick:function(){e.props.setDisplay()}},"X"),s.a.createElement("h2",{className:"authForm_header H_secondary"},"Login"),s.a.createElement("input",{id:"email",name:"email",className:"form_input",type:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})}}),s.a.createElement("label",{type:"form_label",htmlFor:"email"},"Email"),s.a.createElement("input",{id:"password",name:"password",className:"form_input",type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),s.a.createElement("label",{type:"form_label",htmlFor:"password"},"Password"),s.a.createElement(d.Mutation,{mutation:ie,onError:function(t){e.setError(t)},onCompleted:function(t){if(t.loginUser.token){var a=t.loginUser.token;H.a.set("xAuthG",a),e.props.login(t.loginUser),e.props.history.push("/dashboard"),e.setState({loading:!1})}else e.setState({loading:!1})}},function(t,a){a.data;return s.a.createElement("div",null,e.loadingBtn({loginUser:t}))})))}}]),t}(i.Component),oe=Object(E.b)(null,te)(Object(T.a)(se)),ue=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={display:"landing"},a.landing=function(){return s.a.createElement("div",{className:"landing_center"},s.a.createElement("h1",{className:"center_header H_primary"},"Grow Control"),s.a.createElement("div",{className:"center_logo"},s.a.createElement("div",{className:" mushroom_landing_center mushroom"})),s.a.createElement("button",{onClick:function(){return a.setState({display:"signUp"})},className:"center_signUp btn_primary"},s.a.createElement("span",{className:"btn_primary btn_primary-center"},"Sign-Up")),s.a.createElement("button",{onClick:function(){return a.setState({display:"login"})},className:"center_login btn_primary"},s.a.createElement("span",{className:"btn_primary btn_primary-center"},"Login")))},a.setDisplay=function(){a.setState({display:"landing"})},a.renderCenter=function(){switch(a.state.display){case"login":return s.a.createElement(oe,{setDisplay:a.setDisplay});case"signUp":return s.a.createElement(ce,{setDisplay:a.setDisplay});default:return a.landing()}},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){H.a.get("xAuthG")&&this.props.history.push("/Dashboard")}},{key:"render",value:function(){return s.a.createElement("div",{className:"landing"},this.renderCenter())}}]),t}(i.Component),de=Object(T.a)(ue),me=a(23),pe=a(182),ve=a(59),fe=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={width:null,height:null},a.saveRef=function(e){return a.containerNode=e},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"measure",value:function(){var e=this.containerNode,t=e.clientWidth,a=e.clientHeight;this.setState({width:t,height:a})}},{key:"componentDidMount",value:function(){this.measure()}},{key:"componentDidUpdate",value:function(){this.measure()}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.width!==t.width||this.state.height!==t.height||this.props.record.data!==e.record.data||this.props.dataType!==e.dataType||this.props.data!==e.data}},{key:"render",value:function(){var e,t=this.state,a=t.width,n=t.height,r=this.props.record.data;return r&&(e=Object(pe.a)(r)),s.a.createElement("div",{className:"graph",ref:this.saveRef},s.a.createElement(ve.b,{width:a,height:n,data:e,margin:{top:10,right:30,left:0,bottom:0}},s.a.createElement(ve.d,{dataKey:"time",stroke:"#00a8f7",ticks:[1]}),s.a.createElement(ve.e,{stroke:"#00a8f7",tickSize:15}),s.a.createElement(ve.c,null),s.a.createElement(ve.a,{type:"monotone",dataKey:this.props.dataType,stroke:"#00a8f7",fill:"#1f1e1e"})))}}]),t}(i.Component),he=Object(E.b)(function(e){var t=e.records.today;return{record:e.records.selected,data:t[t.length-1]}})(fe),be=a(31),ge=a.n(be),ye=a(46);function Ee(){var e=Object(F.a)(["\nquery recordOneDay($data:RecordOneDayInput){\n    recordOneDay(data: $data){\n        date\n        data{\n            time\n            light\n            temp\n            humidity\n            moisture\n        }\n    }\n}"]);return Ee=function(){return e},e}var _e=P()(Ee()),Oe=Object(E.b)(function(e){return{deviceId:e.device.selectedDevice.id,records:e.records.all,selected:e.records.selected}},te)(function(e){var t=Object(i.useState)(null),a=Object(me.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(null),l=Object(me.a)(c,2),o=l[0],u=l[1],m=e.records,p=e.selected;Object(i.useEffect)(function(){u(H.a.get("xAuthG"))},[n,m,o]);var v=function(){var t=Object(ye.a)(ge.a.mark(function t(a){var n,r,c,l,i,s,o;return ge.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.token,r=a.deviceId,c=a.date,l=a.client,t.next=3,l.query({query:_e,variables:{data:{deviceId:r,token:n,date:c}}});case 3:i=t.sent,s=i.data,o=s.recordOneDay,e.setSelectedRecord(o);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),f=function(){return Object.keys(m).map(function(e){return m[e]}).map(function(t,a){return s.a.createElement(d.ApolloConsumer,{key:t.date},function(a){return s.a.createElement("li",{id:t.date,onClick:function(t){!function(t){var a=t.e,n=t.client;v({token:o,deviceId:e.deviceId,date:a.target.id,client:n})}({e:t,client:a})},className:"dateBtn_item"},t.date)})})};return s.a.createElement("button",{onClick:function(){r(n?null:"expanded")},className:"dateBtn"},n?s.a.createElement("div",{className:"dateBtn_center ".concat(n)},s.a.createElement("ul",null,f())):s.a.createElement("div",{className:"dateBtn_center"},p.date,s.a.createElement("i",{className:"fas fa-chevron-up"})))}),je=Object(E.b)(function(e){return{date:e.records.selected.date}},null)(function(e){var t=Object(i.useState)("light"),a=Object(me.a)(t,2),n=a[0],r=a[1];Object(i.useEffect)(function(){},[n,e.date]);return s.a.createElement("div",{className:"chart card"},s.a.createElement("h2",{className:"H_secondary-white"},"Data for: ".concat(e.date)),s.a.createElement(he,{dataType:n}),s.a.createElement("div",{className:"chart_controls"},s.a.createElement(Oe,null),["Light","Temp","Humidity","Moisture"].map(function(e){var t=n===e.toLowerCase()?"btn_secondary btn_secondary_selected":"btn_secondary";return s.a.createElement("button",{key:e,onClick:function(e){r(e.currentTarget.id.toLowerCase())},id:e,className:t},s.a.createElement("span",{className:"btn_secondary-center"},e))})))});function Ne(){var e=Object(F.a)(["\nsubscription DataSubscription($data: DataSubscriptionInput){\n    data(data: $data){\n      time\n      light\n      temp\n      humidity\n      moisture\n    }\n  }\n"]);return Ne=function(){return e},e}function ke(){var e=Object(F.a)(["\nquery recordOneDay($data:RecordOneDayInput){\n    recordOneDay(data: $data){\n        date\n        data{\n            time\n            light\n            temp\n            humidity\n            moisture\n        }\n    }\n}"]);return ke=function(){return e},e}var we=P()(ke()),De=P()(Ne()),Ce=function(e){var t=e.data;Object(i.useEffect)(function(){e.subscribeToNewData()},[]);var a=[];if(!t)return s.a.createElement("h2",{className:"P"},"Not Active...");for(var n=t.length-1;n>=0;n--)a.push(t[n]);return a.map(function(e){var t=e.time,a=e.light,n=e.temp,r=e.humidity,c=e.moisture;return s.a.createElement("div",{key:e.time,className:"data dataTable_body_data"},s.a.createElement("span",{className:"data dataTable_body-time"},t),s.a.createElement("span",{className:"data dataTable_body-light"},a),s.a.createElement("span",{className:"data dataTable_body-temp"},n),s.a.createElement("span",{className:"data dataTable_body-humidity"},r),s.a.createElement("span",{className:"data dataTable_body-moisture"},c))})},Me=Object(E.b)(function(e){return{deviceId:e.device.selectedDevice.id,userId:e.user.id}},te)(function(e){return s.a.createElement("div",{className:"dataTable card"},s.a.createElement("div",{className:"dataTable_spacer"}),s.a.createElement("div",{className:"dataTable_header H_secondary"},"Current Data"),s.a.createElement("div",{className:"dataTable_body"},s.a.createElement("div",{className:"dataTable_body_label"},s.a.createElement("span",{className:"H_tertiary"},"Time"),s.a.createElement("span",{className:"H_tertiary"},"Light"),s.a.createElement("span",{className:"H_tertiary"},"Temp"),s.a.createElement("span",{className:"H_tertiary"},"Humidity"),s.a.createElement("span",{className:"H_tertiary"},"Moisture")),function(e){if(e.deviceId&&e.userId){var t=e.deviceId,a=e.userId,n=H.a.get("xAuthG"),r=k()().format("MM/DD/YYYY");return s.a.createElement(d.Query,{query:we,variables:{data:{deviceId:t,token:n,date:r}}},function(r){r.loading,r.error;var c=r.data,l=r.subscribeToMore;if(c){if(Object.keys(c).length>0&&null!==c.recordOneDay){var i=c.recordOneDay;return s.a.createElement(Ce,{props:e,data:i.data,subscribeToNewData:function(){return l({document:De,variables:{data:{deviceId:t,token:n,userId:a}},updateQuery:function(t,a){var n=a.subscriptionData;if(!n.data)return t;if(null!==t.recordOneDay){var r=n.data.data,c=t.recordOneDay.data;c[c.length-1].time!==r.time&&(t.recordOneDay.data.push(r),e.updateRecord(r))}return t}})}})}return s.a.createElement("h2",null,"...None")}})}return s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("h2",null,"Nothing Yet..."),s.a.createElement("br",null),s.a.createElement("h2",null,"If a new device has been added,"),s.a.createElement("h2",null,"please refresh the page once the id has been"),s.a.createElement("h2",null,"updated on the physical device."))}(e)))});function Se(){var e=Object(F.a)(["\nmutation updateDevice($data: UpdateDeviceInput!) {\n    updateDevice(data: $data) {\n        id\n      dev_name\n      settings{\n        light {average tol}\n        temp {average tol}\n        humidity {average tol}\n        moisture {average tol}\n      }  \n      records{\n        date\n        data{\n          time\n          light\n          temp\n          humidity\n          moisture\n        }\n      }\n    }\n  }\n"]);return Se=function(){return e},e}var Ue=P()(Se()),xe=Object(E.b)(function(e){return{device:e.device.selectedDevice}},null)(function(e){var t=e.device.settings||{light:{average:0,tol:0},temp:{average:0,tol:0},humidity:{average:0,tol:0},moisture:{average:0,tol:0}},a=e.device.dev_name||"Loading...";for(var n in t){var r=t[n],c=r.average,l=r.tol;t[n]={average:c,tol:l}}delete t.__typename;var o=t.light,u=t.temp,m=t.humidity,p=t.moisture,v=Object(i.useState)(""),f=Object(me.a)(v,2),h=f[0],b=f[1],g=Object(i.useState)(""),y=Object(me.a)(g,2),E=y[0],_=y[1],O=Object(i.useState)(""),j=Object(me.a)(O,2),N=j[0],k=j[1],w=Object(i.useState)(""),D=Object(me.a)(w,2),C=D[0],M=D[1],S=Object(i.useState)(""),U=Object(me.a)(S,2),x=U[0],A=U[1],I=Object(i.useState)(""),T=Object(me.a)(I,2),$=T[0],G=T[1],F=Object(i.useState)(""),R=Object(me.a)(F,2),P=R[0],B=R[1],L=Object(i.useState)(""),q=Object(me.a)(L,2),Y=q[0],Q=q[1],W=Object(i.useState)(""),X=Object(me.a)(W,2),J=X[0],K=X[1],z=function(){var e=Object(ye.a)(ge.a.mark(function e(t){var a,n,r,c,l,i,s,o,u,d;return ge.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.deviceId,n=t.name,r=t.oldName,c=t.oldSettings,l=t.newSettings,i=t.client,e.next=3,H.a.get("xAuthG");case 3:for(d in s=e.sent,o=""===n?r:n,u=c,l)""!==l[d].average&&(u[d].average=parseFloat(l[d].average)),""!==l[d].tol&&(u[d].tol=parseFloat(l[d].tol));return e.next=9,i.mutate({mutation:Ue,variables:{data:{deviceId:a,token:s,name:o,settings:u}}});case 9:e.sent.data,b(""),_(""),k(""),M(""),A(""),G(""),B(""),Q(""),K("");case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"deviceInfo card"},s.a.createElement("h2",{className:"H_secondary H_secondary-sub"},"Update Device"),s.a.createElement("span",{className:"dev_info_header dev_info_header-light"},"light"),s.a.createElement("span",{className:"dev_info_header dev_info_header-temp"},"temp"),s.a.createElement("span",{className:"dev_info_header dev_info_header-humidity"},"humidity"),s.a.createElement("span",{className:"dev_info_header dev_info_header-moisture"},"moisture"),s.a.createElement("span",{className:"dev_info_label dev_info_label-average"},"Avg"),s.a.createElement("span",{className:"dev_info_label dev_info_label-tolerance"},"Tol"),s.a.createElement("input",{className:"P dev_info dev_info_name",placeholder:"Device Name: ".concat(a),value:h,onChange:function(e){b(e.target.value)}}),s.a.createElement("input",{placeholder:o.average,className:"P dev_info-avg dev_info-avg-light",value:E,onChange:function(e){_(e.target.value)}}),s.a.createElement("input",{placeholder:"+/- ".concat(o.tol),className:"P dev_info-tol dev_info-tol-light",value:N,onChange:function(e){k(e.target.value)}}),s.a.createElement("input",{placeholder:u.average,className:"P dev_info-avg dev_info-avg-temp",value:C,onChange:function(e){M(e.target.value)}}),s.a.createElement("input",{placeholder:"+/- ".concat(u.tol),className:"P dev_info-tol dev_info-tol-temp",value:x,onChange:function(e){A(e.target.value)}}),s.a.createElement("input",{placeholder:m.average,className:"P dev_info-avg dev_info-avg-humidity",value:$,onChange:function(e){G(e.target.value)}}),s.a.createElement("input",{placeholder:"+/- ".concat(m.tol,"%"),className:"P dev_info-tol dev_info-tol-humidity",value:P,onChange:function(e){B(e.target.value)}}),s.a.createElement("input",{placeholder:p.average,className:"P dev_info-avg dev_info-avg-moisture",value:Y,onChange:function(e){Q(e.target.value)}}),s.a.createElement("input",{placeholder:"+/- ".concat(p.tol,"%"),className:"P dev_info-tol dev_info-tol-moisture",value:J,onChange:function(e){K(e.target.value)}}),s.a.createElement(d.ApolloConsumer,null,function(a){return s.a.createElement("button",{onClick:function(n){z({client:a,deviceId:e.device.id,oldName:e.device.dev_name,name:h,oldSettings:t,newSettings:{light:{average:E,tol:N},temp:{average:C,tol:x},humidity:{average:$,tol:P},moisture:{average:Y,tol:J}}})},className:"dev_info_btn btn_secondary"},s.a.createElement("span",{className:"btn_secondary-center"},"Submit"))}))}),Ae=function(e){var t=e.measurement,a=e.val;return s.a.createElement("div",null,s.a.createElement("div",{className:"card gauge ".concat(t)},s.a.createElement("div",{className:"gauge_data"},a)),s.a.createElement("div",{className:"gauge_label"},t))},Ie=Object(E.b)(function(e){var t=e.records.today;return{data:t[t.length-1]}})(function(e){var t=e.data||{light:0,temp:0,humidity:0,moisture:0};return Object(i.useEffect)(function(){},[e.data]),s.a.createElement("div",{className:"gauges"},s.a.createElement(Ae,{measurement:"light",val:t.light}),s.a.createElement(Ae,{measurement:"temp",val:t.temp}),s.a.createElement(Ae,{measurement:"humidity",val:t.humidity}),s.a.createElement(Ae,{measurement:"moisture",val:t.moisture}))});function Te(){var e=Object(F.a)(["\n  mutation logout($data: LogoutUserInput!) {\n    logout(data: $data) {\n        id\n    }\n  }\n"]);return Te=function(){return e},e}var $e=P()(Te()),He=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).logoutUser=function(e){H.a.remove("xAuthG"),a.props.logOut(),e({variables:{data:{userId:a.props.user.id}}}),a.props.history.push("/")},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(d.Mutation,{mutation:$e,onError:function(e){},onCompleted:function(e){}},function(t,a){a.data;return s.a.createElement("div",null,s.a.createElement("p",{onClick:function(){e.logoutUser(t)}},"Logout"))})}}]),t}(i.Component),Ge=Object(E.b)(function(e){return{user:e.user}},te)(Object(T.a)(He)),Fe=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:null},a.compress=function(e){a.state.expanded?a.setState({expanded:null}):a.setState({expanded:"expanded"})},a.displayMenu=function(e){a.props.setMenu(e),a.props.setModal()},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{onClick:this.compress,className:"menu ".concat(this.state.expanded)},s.a.createElement("div",{className:"menu_links ".concat(this.state.expanded)},s.a.createElement(Ge,null),s.a.createElement("p",{onClick:function(){e.displayMenu("deviceMenu")}},"Device Menu"),s.a.createElement("p",{onClick:function(){e.displayMenu("userAccount")}},"User Account")),s.a.createElement("div",{className:"menu_btn ".concat(this.state.expanded)},s.a.createElement("div",{className:"menu_bar-1"}),s.a.createElement("div",{className:"menu_bar-2"}),s.a.createElement("div",{className:"menu_bar-3"})))}}]),t}(i.Component);function Re(){var e=Object(F.a)(["\n  mutation deleteUser($data: DeleteUserInput!) {\n    deleteUser(data: $data) {\n      id\n    }\n  }\n"]);return Re=function(){return e},e}function Pe(){var e=Object(F.a)(["\n  mutation updateUser($data: UpdateUserInput!) {\n    updateUser(data: $data) {\n      id\n      email\n    }\n  }\n"]);return Pe=function(){return e},e}var Be=P()(Pe()),Le=P()(Re()),qe=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",loading:!1,errorMsg:null},a.updateBtn=function(e){return a.state.loading?s.a.createElement("div",null," ",s.a.createElement(B,null)," "):s.a.createElement("button",{className:"btn_primary",onClick:function(){a.setState({loading:!0}),e({variables:{data:{userId:a.props.user.id,email:a.state.email,password:a.state.password,token:a.props.user.token}}})}},s.a.createElement("span",{className:"btn_primary-center"},"Update"))},a.deleteBtn=function(e){return a.state.loading?s.a.createElement("div",null," ",s.a.createElement(B,null)," "):s.a.createElement("button",{className:"btn_primary btn_primary--del",onClick:function(){H.a.remove("xAuthG"),a.props.logOut(),e({variables:{data:{userId:a.props.user.id}}}),a.props.history.push("/")}},s.a.createElement("span",{className:"btn_primary-center btn_primary-center--del"},"Delete"))},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modifyUser"},s.a.createElement("input",{id:"email",name:"email",className:"form_input",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},type:"email"}),s.a.createElement("label",{type:"authForm label form_label",htmlFor:"email"},"Email"),s.a.createElement("input",{id:"password",name:"password",className:"form_input",type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}),s.a.createElement("label",{type:"authForm label form_label",htmlFor:"password"},"Password"),s.a.createElement("div",{className:"modifyUser_btns"},s.a.createElement(d.Mutation,{mutation:Be,onCompleted:function(t){e.setState({loading:!1}),e.props.updateUser(t.updateUser),e.props.closeModal()},onError:function(){}},function(t,a){a.data;return s.a.createElement("div",null,e.updateBtn(t))}),s.a.createElement(d.Mutation,{mutation:Le},function(t,a){a.data;return s.a.createElement("div",null,e.deleteBtn(t))})),s.a.createElement("p",{className:"error"},this.state.errorMsg))}}]),t}(i.Component),Ye=Object(E.b)(function(e){return{user:e.user}},te)(Object(T.a)(qe)),Qe=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:null,selected:"Select A Device"},a.expand=function(){a.state.expanded?a.setState({expanded:null}):a.setState({expanded:"expanded"})},a.setSelected=function(e){a.setState({selected:e}),a.props.select(e)},a.liClick=function(e){a.setSelected(e.target.id)},a.mapList=function(){var e=a.props.device.devices;return Object.keys(e).map(function(e){return s.a.createElement("li",{id:e,onClick:function(e){a.liClick(e)},className:"selectDevice_item",key:e},e)})},a.renderCenter=function(){var e=a.state.expanded;if(e||"Select A Device"!==a.state.selected){if(e){var t=a.mapList();return s.a.createElement("div",{className:"selectDevice_center ".concat(a.state.expanded)},s.a.createElement("ul",null,t))}return s.a.createElement("div",{className:"selectDevice_center"},"Device: ",a.state.selected,s.a.createElement("i",{className:"fas fa-chevron-up"}))}return s.a.createElement("div",{className:"selectDevice_center"},a.state.selected,s.a.createElement("i",{className:"fas fa-chevron-up"}))},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("button",{onClick:function(){e.expand()},className:"selectDevice"},this.renderCenter())}}]),t}(i.Component),We=Object(E.b)(function(e){return{device:e.device}},te)(Qe);function Xe(){var e=Object(F.a)(["\n  mutation addDeviceToUser($data: AddDeviceToUserInput!) {\n    addDeviceToUser(data: $data) {\n        id\n      dev_name\n      settings{\n        light {average tol}\n        temp {average tol}\n        humidity {average tol}\n        moisture {average tol}\n      }  \n      records{\n        date\n        data{\n          time\n          light\n          temp\n          humidity\n          moisture\n        }\n      }\n    }\n  }"]);return Xe=function(){return e},e}function Je(){var e=Object(F.a)(["\n  mutation deleteDevice($data: DeleteDeviceInput!) {\n    deleteDevice(data: $data) {\n      id\n    }\n  }"]);return Je=function(){return e},e}var Ke=P()(Je()),ze=P()(Xe()),Ve=Object(E.b)(function(e){return{user:e.user,devices:e.device}},te)(function(e){Object(i.useEffect)(function(){},[e]);var t=Object(i.useState)(""),a=Object(me.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(""),l=Object(me.a)(c,2),o=l[0],u=l[1],m=Object(i.useState)(""),p=Object(me.a)(m,2),v=p[0],f=p[1],h=Object(i.useState)(""),b=Object(me.a)(h,2),g=b[0],y=b[1],E=Object(i.useState)(!1),_=Object(me.a)(E,2),O=_[0],j=_[1],N=function(e){var t=e.message.slice(e.message.indexOf(":")+2);y(t)},k=function(){var t=Object(ye.a)(ge.a.mark(function t(a){var n,r,c,l,i,s,o,u;return ge.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.userId,r=a.deviceName,c=a.client,t.next=3,H.a.get("xAuthG");case 3:return l=t.sent,t.next=6,c.mutate({mutation:ze,variables:{data:{userId:n,deviceName:r,token:l}}});case 6:i=t.sent,s=i.data,(o=i.error)?(j(!1),N(o)):(j(!1),u=s.addDeviceToUser,y("New Device!      DeviceId: ".concat(u.id,"   -   UserId: ").concat(e.user.id)),e.addDevice(u));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(ye.a)(ge.a.mark(function t(a){var n,r,c,l,i;return ge.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.deviceId,r=a.client,t.next=3,H.a.get("xAuthG");case 3:return c=t.sent,t.next=6,r.mutate({mutation:Ke,variables:{data:{deviceId:n,token:c}}});case 6:l=t.sent,(i=l.error)?(j(!1),N(i)):(j(!1),e.closeModal());case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}();return s.a.createElement("div",{className:"deviceMenu"},s.a.createElement("div",{className:"deviceMenu_row"},s.a.createElement("div",{className:"dropdownContainer"},s.a.createElement(We,{select:r})),O?s.a.createElement(B,null):s.a.createElement(d.ApolloConsumer,null,function(t){return s.a.createElement("button",{onClick:function(){!function(){if(""!==n){var t=e.devices.devices[n];e.setSelectedDevice(t.dev_name);var a=t.records;e.setDeviceRecords(a),e.closeModal()}else j(!1),y("Must select a device")}()},className:"btn_primary btn_primary deviceMenu_btn"},s.a.createElement("span",{className:"btn_primary-center"},"Set Device"))})),s.a.createElement("h2",{className:"H_secondary H_secondary-sub"},"OR"),s.a.createElement("div",{className:"deviceMenu_row"},s.a.createElement("input",{className:"deviceMenu_input",placeholder:"Device Name:",value:o,onChange:function(e){u(e.target.value)}}),O?s.a.createElement(B,null):s.a.createElement(d.ApolloConsumer,null,function(t){return s.a.createElement("button",{onClick:function(){!function(t){if(j(!0),""!==o){var a=e.user.id;k({client:t,userId:a,deviceName:o})}else j(!1),y("Must Enter A New Device Name");u("")}(t)},className:"btn_primary btn_primary--add deviceMenu_btn"},s.a.createElement("span",{className:"btn_primary-center"},"Add Device"))})),s.a.createElement("div",{className:"deviceMenu_row"},s.a.createElement("div",{className:"dropdownContainer"},s.a.createElement(We,{select:f})),O?s.a.createElement(B,null):s.a.createElement(d.ApolloConsumer,null,function(t){return s.a.createElement("button",{onClick:function(){!function(t){j(!0);var a=e.devices.devices[v],n=a.id;w({deviceId:n,client:t}),e.deleteDevice(a.dev_name)}(t)},className:"btn_primary btn_primary--del deviceMenu_btn"},s.a.createElement("span",{className:"btn_primary-center"},"Del Device"))})),s.a.createElement("p",{className:"error"},g))}),Ze=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).closeModal=function(){a.props.setModal()},a.renderForm=function(){switch(a.props.menu){case"userAccount":return s.a.createElement("div",null,s.a.createElement(Ye,{closeModal:a.closeModal}));case"deviceMenu":return s.a.createElement("div",null,s.a.createElement(Ve,{closeModal:a.closeModal}));default:return null}},a.renderTitle=function(){switch(a.props.menu){case"userAccount":return"User Account";case"deviceMenu":return"Device Menu";default:return null}},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"modal_content card"},s.a.createElement("p",{onClick:function(){e.closeModal()},className:"modal_close form_close"},"X"),s.a.createElement("h2",{className:"modal_header H_secondary"},this.renderTitle()),s.a.createElement("div",{className:"modal_body"},this.renderForm())))}}]),t}(i.Component);function et(){var e=Object(F.a)(["\nquery FindUser($data:FindUserInput){\n  findUser(data: $data){\n      id\n      email\n      device{\n      id\n      dev_name\n      settings{\n        light {average tol}\n        temp {average tol}\n        humidity {average tol}\n        moisture {average tol}\n      }  \n      records{\n        date\n        data{\n          time\n          light\n          temp\n          humidity\n          moisture\n        }\n      }\n    }\n  }\n}\n"]);return et=function(){return e},e}var tt=P()(et()),at=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1,menu:null,token:null},a.setModal=function(){var e=!a.state.showModal;a.setState({showModal:e})},a.setMenu=function(e){a.setState({menu:e})},a.parseQuery=function(e){var t={id:e.id,email:e.email},n=a.props.device.devices;if(e.device!==[]&&0===Object.keys(n).length){var r=e.device;if(0!==r.length){a.props.updateDevices(r);var c=r[0].records;c!==[]&&a.props.setDeviceRecords(c)}}null===a.props.user.id&&a.props.updateUser(t)},a.usr=function(e){return s.a.createElement(d.Query,{query:tt,variables:{data:{token:e}},onCompleted:function(e){a.parseQuery(e.findUser)},onError:function(e){console.log(e)}},function(e){e.loading,e.error,e.data;return s.a.createElement("div",{className:"dashboard"},a.state.showModal?s.a.createElement(Ze,{setModal:a.setModal,menu:a.state.menu}):null,s.a.createElement(Fe,{setModal:a.setModal,setMenu:a.setMenu}),s.a.createElement(je,null),s.a.createElement(Me,null),s.a.createElement(xe,null),s.a.createElement(Ie,null))})},a}return Object(x.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.setState({token:H.a.get("xAuthG")}),this.props.updateUser({token:H.a.get("xAuthG")})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.state!==e}},{key:"render",value:function(){return s.a.createElement("div",null,this.usr(this.state.token))}}]),t}(i.Component),nt=Object(E.b)(function(e){return e},te)(at),rt=function(e){function t(){return Object(C.a)(this,t),Object(S.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(A.a,null,s.a.createElement("div",null,s.a.createElement(I.a,{path:"/",exact:!0,component:de}),s.a.createElement(I.a,{path:"/Dashboard",exact:!0,component:G(nt)}))))}}]),t}(i.Component),ct=new f.a({uri:"https://growctrl.herokuapp.com/gql"}),lt=new h.a({uri:"wss://growctrl.herokuapp.com/subscribe",options:{reconnect:!0}}),it=Object(v.e)(function(e){var t=e.query,a=Object(b.e)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r},lt,ct),st=new m.a({link:it,cache:new p.a}),ot=Object(g.createStore)(D,Object(y.composeWithDevTools)(Object(g.applyMiddleware)()));u.a.render(s.a.createElement(d.ApolloProvider,{client:st},s.a.createElement(E.a,{store:ot},s.a.createElement(rt,null))),document.getElementById("root"))}},[[211,2,1]]]);
//# sourceMappingURL=main.fbd9d7c3.chunk.js.map